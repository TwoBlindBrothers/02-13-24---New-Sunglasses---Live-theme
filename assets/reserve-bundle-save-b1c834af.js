class u extends HTMLElement{constructor(){super();const t=this.querySelector("[data-rebuy-id]");if(!t)return;this.rebuyWidgetId=t.getAttribute("data-rebuy-id"),this.mainProductId=this.getAttribute("data-product-id"),this.firstLoad=0,document.addEventListener("rebuy.init",r=>{setTimeout(()=>{this.addText(),this.addTextToButton(),this.removeAttrHeading()},500)}),document.addEventListener("rebuy.beforeAdd",r=>{const{product:o,widget:i}=r.detail;i.id===this.rebuyWidgetId&&(o.properties._main_product_id=this.mainProductId)});const e={childList:!0,subtree:!0},d=(r,o)=>{for(const i of r){const n=this.querySelector(".rebuy-product-options"),s=this.querySelector(".rebuy-product-block");n?s.classList.add("show-options"):s.classList.remove("show-options")}};new MutationObserver(d).observe(this,e)}addText(){const t=this.querySelector(".rebuy-product-info");if(t&&this.firstLoad===0){this.firstLoad++;const e=document.createElement("p");e.classList.add("label","rebuy-product-label"),e.textContent="Bundle & Save",t.insertBefore(e,t.firstChild)}}addTextToButton(){const t=this.querySelector(".rebuy-product-price");if(t){const e=this.querySelector(".rebuy-product-actions .rebuy-button");e.textContent="Add to Bag â€¢ ",e.appendChild(t)}}removeAttrHeading(){const t=this.querySelector(".rebuy-product-title");t&&t.removeAttribute("aria-level")}}window.customElements.define("bundle-save",u);
