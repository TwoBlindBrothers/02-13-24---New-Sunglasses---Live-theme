{%- liquid
  assign title = section.settings.title
  assign description = section.settings.description
  assign button_text = section.settings.button_text
  assign button_link = section.settings.button_link
  assign media_type = section.settings.media_type
  assign media_image_mobile = section.settings.media_image_mobile
  assign media_image_desktop = section.settings.media_image_desktop
  assign video = section.settings.video
  assign video_mobile = section.settings.video_mobile
  assign media_video_mobile = section.settings.media_video_mobile
  assign media_video_desktop = section.settings.media_video_desktop
-%}

<div class="relative reserve-mission" data-aos="fade-up" data-aos-offset="200" data-aos-delay="50" data-aos-duration="800">
  <div class="reserve-mission__blur js-reserve-mission-blur"></div>
  <div class="reserve-mission__inner flex flex-col-reverse sm:flex-row relative pb-[71px] sm:pb-0">
    <div class="reserve-mission__media relative shrink-0 w-full sm:w-[469px] md:w-[625px] lg:w-[925px]
      before:content-[''] before:block before:pb-[calc(413/375*100%)] before:sm:pb-[calc(400/469*100%)]
      before:md:pb-[calc(533/625*100%)] before:lg:pb-[calc(750/925*100%)] overflow-hidden"
    >
      {%- if media_type == 'image' -%}
        <picture>
          <source data-srcset="{{ media_image_desktop | img_url: '1024x' }}" media="(min-width: 769px)" />
          <source data-srcset="{{ media_image_desktop | img_url: '1024x' }}" media="(min-width: 500px)" />
          <source data-srcset="{{ media_image_mobile | img_url: '500x' }}" media="(min-width: 320px)" />
          <img class="absolute top-0 left-0 object-cover w-full h-full lazyload animation-image" data-src="{{ media_image_desktop | img_url: '1024x' }}" alt="{{ media_image_desktop.alt }}"/>
        </picture>
      {%- else -%}
        {%- render 'reserve-video',
          class: 'md:hidden !absolute top-0 left-0 !w-full !h-full object-cover',
          video: video_mobile,
          video_url: media_video_mobile,
          autoplay: true,
          muted: true,
          overlay: false,
          show_muted: true,
          button_class: 'bottom-[12px] right-[12px]'
        -%}
        {%- render 'reserve-video',
          class: 'hidden md:block !absolute top-0 left-0 !w-full !h-full object-cover',
          video: video,
          video_url: media_video_desktop,
          autoplay: true,
          muted: true,
          show_muted: true,
          overlay: false,
          button_class: 'md:bottom-[35px] md:right-[35px]'
        -%}
      {%- endif -%}
    </div>
    <div class="reserve-mission__content sm:relative px-[15px] pt-8 pb-[42px] sm:p-6 sm:pr-8 md:p-8 lg:p-14 lg:pb-6">
      {%- if title != blank -%}
        <h2 class="h2-reserve max-w-[403px] mb-2">{{ title }}</h2>
      {%- endif -%}
      {%- if description != blank -%}
        <div class="p2 reserve-mission__content--description">{{ description }}</div>
      {%- endif -%}
      {%- if button_text != blank and button_link != blank -%}
        <a class="inline-flex items-center reserve-btn reserve-btn--yellow rounded-[30px] label px-8 py-2 h-[34px] md:h-[38px] hover:bg-[rgb(252,243,200)]" href="{{ button_link }}">{{ button_text }}</a>
      {%- endif -%}
      <div class="absolute bottom-[16px] sm:bottom-6 md:bottom-8 lg:bottom-8 flex items-center gap-[13px]">
        <button onclick="this.closest('.reserve-mission').classList.toggle('active'); document.body.classList.toggle('active-blind-mission')" class="relative [.active-eyeball-blind_&]:pointer-events-none w-[77px] h-[39px] bg-grey-400 [.active_&]:bg-white rounded-full p-1 js-toggle-burry" aria-label="See what we see">
          <svg class="absolute left-1 top-1 [.active_&]:opacity-0 transition-all duration-200" xmlns="http://www.w3.org/2000/svg" width="31" height="31" fill="none" viewBox="0 0 31 31"><circle cx="15.5" cy="15.5" r="15.5" fill="#F0D83D"/><path stroke="#000" stroke-miterlimit="10" stroke-width="1.5" d="M22.662 14a8.486 8.486 0 0 1-14.958.158M7.585 16.704 5 18.677M10.052 18.934l-1.816 2.703M13.505 20.118l-.532 3.216M17.235 20.118l.513 3.216M20.354 18.934l1.815 2.703M22.78 16.704l2.606 1.973"/></svg>
          <svg class="absolute left-1 top-1 opacity-0 [.active_&]:opacity-100 [.active_&]:left-[42px] transition-all duration-200" xmlns="http://www.w3.org/2000/svg" width="31" height="31" fill="none" viewBox="0 0 31 31"><circle cx="15.5" cy="15.5" r="15.5" fill="#F0D83D"/><path fill="#000" d="M15.254 11.1c2.929 0 5.54 1.704 6.816 4.4-1.275 2.696-3.88 4.4-6.816 4.4s-5.54-1.704-6.815-4.4c1.275-2.696 3.887-4.4 6.815-4.4Zm0-1.6c-3.863 0-7.163 2.488-8.5 6 1.337 3.512 4.637 6 8.5 6 3.864 0 7.164-2.488 8.5-6-1.336-3.512-4.636-6-8.5-6Zm0 4c1.067 0 1.932.896 1.932 2s-.865 2-1.932 2c-1.066 0-1.931-.896-1.931-2s.865-2 1.931-2Zm0-1.6c-1.916 0-3.477 1.616-3.477 3.6s1.561 3.6 3.477 3.6c1.917 0 3.478-1.616 3.478-3.6s-1.561-3.6-3.478-3.6Z"/></svg>
        </button>
        <span class="label">See what we see</span>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Reserve - Mission",
  "class": "bg-black text-white",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    },
    {
      "type": "select",
      "id": "media_type",
      "label": "Media Type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "media_image_mobile",
      "label": "Media Image (Mobile)"
    },
    {
      "type": "image_picker",
      "id": "media_image_desktop",
      "label": "Media Image (Desktop)"
    },
    {
      "type": "video",
      "id": "video_mobile",
      "label": "Video (Mobile)"
    },
    {
      "type": "video",
      "id": "video",
      "label": "Video (Desktop)"
    },
    {
      "type": "video_url",
      "id": "media_video_mobile",
      "label": "Media Video (Mobile)",
      "accept": [
        "youtube",
        "vimeo"
      ],
      "info": "Link Youtube & Vimeo"
    },
    {
      "type": "video_url",
      "id": "media_video_desktop",
      "label": "Media Video (Desktop)",
      "accept": [
        "youtube",
        "vimeo"
      ],
      "info": "Link Youtube & Vimeo"
    }
  ],
  "presets": [
    {
      "name": "Reserve - Mission"
    }
  ]
}
{% endschema %}